<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnam Map 34 Provinces - Demo</title>
    <meta name="description" content="B·∫£n ƒë·ªì Vi·ªát Nam v·ªõi 34 t·ªânh/th√†nh ph·ªë m·ªõi theo Ngh·ªã quy·∫øt 60-NQ/TW">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highcharts -->
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/drilldown.js"></script>

    <style>
        :root {
            --primary: #0ea5e9;
            --primary-dark: #0284c7;
            --accent: #22c55e;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0f172a 100%);
            --card-bg: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        header {
            text-align: center;
            padding: 3rem 0;
        }

        .badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #fff, #0ea5e9);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #94a3b8;
            font-size: 1.125rem;
            margin-bottom: 2rem;
        }

        /* Map Container */
        .map-section {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 1024px) {
            .map-section {
                grid-template-columns: 1fr;
            }
        }

        .map-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .map-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #94a3b8;
        }

        .breadcrumb span {
            cursor: pointer;
            transition: color 0.2s;
        }

        .breadcrumb span:hover {
            color: var(--primary);
        }

        .breadcrumb .current {
            color: var(--primary);
            font-weight: 600;
        }

        #map {
            height: 600px;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        /* Loading */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            z-index: 10;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .card h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #e2e8f0;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(14, 165, 233, 0.1);
            border-radius: 0.75rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Province Info */
        .province-info {
            display: none;
        }

        .province-info.active {
            display: block;
        }

        .province-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .province-detail {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
        }

        .province-detail:last-child {
            border-bottom: none;
        }

        .province-detail span:first-child {
            color: #94a3b8;
        }

        .province-detail span:last-child {
            font-weight: 600;
        }

        /* Drilldown hint */
        .drilldown-hint {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            color: var(--accent);
            margin-top: 1rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-outline {
            border: 1px solid var(--border);
            color: #e2e8f0;
            background: transparent;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }

        /* Code Block */
        .code-block {
            background: #0f172a;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
            color: #e2e8f0;
        }

        .code-block .comment {
            color: #64748b;
        }

        .code-block .string {
            color: #22c55e;
        }

        .code-block .keyword {
            color: #f472b6;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: #64748b;
            font-size: 0.875rem;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Feature badges */
        .features {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .feature-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            color: #e2e8f0;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <span class="badge">Ngh·ªã quy·∫øt 60-NQ/TW</span>
            <h1>üáªüá≥ Vietnam Map 34 Provinces</h1>
            <p class="subtitle">B·∫£n ƒë·ªì Vi·ªát Nam v·ªõi 34 t·ªânh/th√†nh ph·ªë m·ªõi (hi·ªáu l·ª±c 01/07/2025)</p>

            <div class="features">
                <span class="feature-badge">‚úÖ 34 t·ªânh m·ªõi</span>
                <span class="feature-badge">üîç Drilldown ƒë·∫øn x√£/ph∆∞·ªùng</span>
                <span class="feature-badge">üìä 11,163 ƒë∆°n v·ªã h√†nh ch√≠nh</span>
            </div>

            <div class="btn-group">
                <a href="https://github.com/xdev-asia-labs/vietnam-map-34-provinces" class="btn btn-outline"
                    target="_blank">
                    ‚≠ê GitHub
                </a>
                <a href="https://www.npmjs.com/package/@xdev-asia/vietnam-map-34-provinces" class="btn btn-primary"
                    target="_blank">
                    üì¶ npm install
                </a>
            </div>
        </header>

        <div class="map-section">
            <div class="map-container">
                <div class="map-header">
                    <div class="map-title" id="mapTitle">üó∫Ô∏è B·∫£n ƒë·ªì 34 t·ªânh</div>
                    <div class="breadcrumb" id="breadcrumb">
                        <span onclick="goToCountry()">Vi·ªát Nam</span>
                    </div>
                </div>
                <div id="map"></div>
                <div class="loading-overlay" id="loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h3>üìä Th·ªëng k√™</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-value">34</div>
                            <div class="stat-label">T·ªânh m·ªõi</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">23</div>
                            <div class="stat-label">ƒê√£ h·ª£p nh·∫•t</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">11</div>
                            <div class="stat-label">Gi·ªØ nguy√™n</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="communeCount">11,163</div>
                            <div class="stat-label">X√£/Ph∆∞·ªùng</div>
                        </div>
                    </div>
                </div>

                <div class="card province-info" id="provinceInfo">
                    <h3>üìç ƒê√£ ch·ªçn</h3>
                    <div class="province-name" id="provinceName">-</div>
                    <div class="province-detail">
                        <span>Lo·∫°i</span>
                        <span id="provinceType">-</span>
                    </div>
                    <div class="province-detail">
                        <span>S·ªë x√£/ph∆∞·ªùng</span>
                        <span id="provinceCommunes">-</span>
                    </div>
                    <div class="province-detail">
                        <span>H·ª£p nh·∫•t t·ª´</span>
                        <span id="provinceMerged">-</span>
                    </div>
                    <div class="drilldown-hint" id="drilldownHint">
                        üí° Click v√†o t·ªânh ƒë·ªÉ xem chi ti·∫øt c√°c x√£/ph∆∞·ªùng
                    </div>
                </div>

                <div class="card">
                    <h3>üì¶ C√†i ƒë·∫∑t</h3>
                    <div class="code-block">
                        <span class="keyword">npm install</span> <span
                            class="string">@xdev-asia/vietnam-map-34-provinces</span>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            Made with ‚ù§Ô∏è by <a href="https://github.com/xdev-asia-labs">xdev-asia-labs</a>
            &nbsp;‚Ä¢&nbsp;
            <a href="https://github.com/xdev-asia-labs/vietnam-map-34-provinces">View on GitHub</a>
            &nbsp;‚Ä¢&nbsp;
            Data from <a href="https://gadm.org" target="_blank">GADM</a>
        </footer>
    </div>

    <script type="module">
        // Province mapping
        const PROVINCE_MAPPING = {
            "ha noi": "H√† N·ªôi", "ha tay": "H√† N·ªôi",
            "thua thien hue": "Hu·∫ø", "thua thien - hue": "Hu·∫ø", "hue": "Hu·∫ø",
            "lai chau": "Lai Ch√¢u", "dien bien": "ƒêi·ªán Bi√™n", "son la": "S∆°n La",
            "lang son": "L·∫°ng S∆°n", "quang ninh": "Qu·∫£ng Ninh", "thanh hoa": "Thanh H√≥a",
            "nghe an": "Ngh·ªá An", "ha tinh": "H√† Tƒ©nh", "cao bang": "Cao B·∫±ng",
            "tuyen quang": "Tuy√™n Quang", "ha giang": "Tuy√™n Quang",
            "lao cai": "L√†o Cai", "yen bai": "L√†o Cai",
            "bac kan": "Th√°i Nguy√™n", "bac can": "Th√°i Nguy√™n", "thai nguyen": "Th√°i Nguy√™n",
            "vinh phuc": "Ph√∫ Th·ªç", "phu tho": "Ph√∫ Th·ªç", "hoa binh": "Ph√∫ Th·ªç",
            "bac ninh": "B·∫Øc Ninh", "bac giang": "B·∫Øc Ninh",
            "hung yen": "H∆∞ng Y√™n", "thai binh": "H∆∞ng Y√™n",
            "hai duong": "H·∫£i Ph√≤ng", "hai phong": "H·∫£i Ph√≤ng",
            "ha nam": "Ninh B√¨nh", "ninh binh": "Ninh B√¨nh", "nam dinh": "Ninh B√¨nh",
            "quang binh": "Qu·∫£ng Tr·ªã", "quang tri": "Qu·∫£ng Tr·ªã",
            "quang nam": "ƒê√† N·∫µng", "da nang": "ƒê√† N·∫µng",
            "kon tum": "Qu·∫£ng Ng√£i", "quang ngai": "Qu·∫£ng Ng√£i",
            "gia lai": "Gia Lai", "binh dinh": "Gia Lai",
            "ninh thuan": "Kh√°nh H√≤a", "khanh hoa": "Kh√°nh H√≤a",
            "lam dong": "L√¢m ƒê·ªìng", "dak nong": "L√¢m ƒê·ªìng", "binh thuan": "L√¢m ƒê·ªìng",
            "dak lak": "ƒê·∫Øk L·∫Øk", "phu yen": "ƒê·∫Øk L·∫Øk",
            "ba ria - vung tau": "H·ªì Ch√≠ Minh", "ba ria vung tau": "H·ªì Ch√≠ Minh",
            "binh duong": "H·ªì Ch√≠ Minh", "ho chi minh": "H·ªì Ch√≠ Minh",
            "dong nai": "ƒê·ªìng Nai", "binh phuoc": "ƒê·ªìng Nai",
            "tay ninh": "T√¢y Ninh", "long an": "T√¢y Ninh",
            "can tho": "C·∫ßn Th∆°", "soc trang": "C·∫ßn Th∆°", "hau giang": "C·∫ßn Th∆°",
            "ben tre": "Vƒ©nh Long", "vinh long": "Vƒ©nh Long", "tra vinh": "Vƒ©nh Long",
            "tien giang": "ƒê·ªìng Th√°p", "dong thap": "ƒê·ªìng Th√°p",
            "bac lieu": "C√† Mau", "ca mau": "C√† Mau",
            "an giang": "An Giang", "kien giang": "An Giang"
        };

        // Province commune counts
        const PROVINCE_COMMUNES = {
            "An Giang": 301, "H·ªì Ch√≠ Minh": 495, "B·∫Øc Ninh": 358, "Th√°i Nguy√™n": 302,
            "C√† Mau": 165, "Vƒ©nh Long": 379, "Gia Lai": 381, "ƒê·ªìng Nai": 282,
            "L√¢m ƒê·ªìng": 345, "C·∫ßn Th∆°": 270, "Cao B·∫±ng": 199, "ƒê√† N·∫µng": 300,
            "ƒê·∫Øk L·∫Øk": 296, "ƒêi·ªán Bi√™n": 130, "ƒê·ªìng Th√°p": 317, "Tuy√™n Quang": 336,
            "Ninh B√¨nh": 490, "H√† N·ªôi": 584, "H√† Tƒ©nh": 262, "H·∫£i Ph√≤ng": 489,
            "Ph√∫ Th·ªç": 624, "H∆∞ng Y√™n": 447, "Kh√°nh H√≤a": 202, "Qu·∫£ng Ng√£i": 286,
            "Lai Ch√¢u": 108, "L·∫°ng S∆°n": 226, "L√†o Cai": 344, "T√¢y Ninh": 287,
            "Ngh·ªá An": 480, "Qu·∫£ng Tr·ªã": 301, "Qu·∫£ng Ninh": 186, "S∆°n La": 204,
            "Thanh H√≥a": 635, "Hu·∫ø": 152
        };

        function normalizeName(str) {
            if (!str) return "";
            return str.toLowerCase()
                .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                .replace(/ƒë/g, "d").replace(/ƒê/g, "D")
                .trim();
        }

        function getFilename(name) {
            return normalizeName(name).replace(/\s+/g, '-') + '.json';
        }

        let mainChart = null;
        let currentProvince = null;

        // Load country-level map
        async function initMap() {
            showLoading(true);

            const response = await fetch('https://raw.githubusercontent.com/xdev-asia-labs/vietnam-map-34-provinces/main/src/core/assets/vn-all.geo.json');
            const topology = await response.json();

            // Process and merge provinces
            const groupedFeatures = {};
            topology.features.forEach(f => {
                const originalName = f.properties.name;
                const normalized = normalizeName(originalName);
                let newName = PROVINCE_MAPPING[normalized];

                if (!newName) {
                    const foundKey = Object.keys(PROVINCE_MAPPING).find(key => normalized.includes(key));
                    newName = foundKey ? PROVINCE_MAPPING[foundKey] : originalName;
                }

                const newId = `vn-new-${normalizeName(newName).replace(/\s+/g, '-')}`;

                if (!groupedFeatures[newId]) {
                    groupedFeatures[newId] = [];
                }
                groupedFeatures[newId].push({ feature: f, newName, newId, originalName });
            });

            const mergedFeatures = Object.values(groupedFeatures).map(group => {
                const firstItem = group[0];

                if (group.length === 1) {
                    return {
                        ...firstItem.feature,
                        properties: {
                            ...firstItem.feature.properties,
                            "hc-key": firstItem.newId,
                            name: firstItem.newName,
                            "original-names": [firstItem.originalName]
                        }
                    };
                }

                const mergedCoordinates = [];
                group.forEach(item => {
                    const geom = item.feature.geometry;
                    if (geom.type === 'Polygon') {
                        mergedCoordinates.push(geom.coordinates);
                    } else if (geom.type === 'MultiPolygon') {
                        mergedCoordinates.push(...geom.coordinates);
                    }
                });

                return {
                    type: "Feature",
                    properties: {
                        "hc-key": firstItem.newId,
                        name: firstItem.newName,
                        "original-names": group.map(g => g.originalName)
                    },
                    geometry: {
                        type: "MultiPolygon",
                        coordinates: mergedCoordinates
                    }
                };
            });

            const processedTopology = { ...topology, features: mergedFeatures };

            const mapData = mergedFeatures.map(f => ({
                "hc-key": f.properties["hc-key"],
                value: PROVINCE_COMMUNES[f.properties.name] || 100,
                name: f.properties.name,
                originalNames: f.properties["original-names"],
                drilldown: getFilename(f.properties.name)
            }));

            mainChart = Highcharts.mapChart('map', {
                chart: {
                    map: processedTopology,
                    backgroundColor: 'transparent',
                    height: 600,
                    events: {
                        drilldown: function (e) {
                            if (!e.seriesOptions) {
                                drillDown(e.point.name, this);
                            }
                        },
                        drillup: function () {
                            goToCountry();
                        }
                    }
                },
                title: { text: null },
                credits: { enabled: false },
                mapNavigation: {
                    enabled: true,
                    enableDoubleClickZoom: true,
                    buttonOptions: { verticalAlign: 'bottom' }
                },
                colorAxis: {
                    min: 0,
                    stops: [
                        [0, '#E1F5FE'],
                        [0.4, '#4FC3F7'],
                        [1, '#01579B']
                    ]
                },
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.95)',
                    borderColor: '#334155',
                    style: { color: '#fff' },
                    useHTML: true,
                    headerFormat: '<div style="font-size:14px;font-weight:bold;margin-bottom:8px">{point.key}</div>',
                    pointFormat: '<div>S·ªë x√£/ph∆∞·ªùng: <b>{point.value}</b></div><div style="color:#22c55e;margin-top:8px;font-size:12px">üîç Click ƒë·ªÉ xem chi ti·∫øt</div>'
                },
                series: [{
                    type: 'map',
                    data: mapData,
                    joinBy: 'hc-key',
                    borderColor: '#ffffff',
                    borderWidth: 0.5,
                    cursor: 'pointer',
                    states: {
                        hover: {
                            color: '#fbbf24',
                            borderColor: '#d97706'
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}',
                        style: {
                            fontSize: '9px',
                            fontWeight: '500',
                            textOutline: '2px contrast',
                            color: '#1e293b'
                        }
                    },
                    point: {
                        events: {
                            click: function () {
                                drillDown(this.name, mainChart);
                            }
                        }
                    }
                }],
                drilldown: {
                    activeDataLabelStyle: {
                        color: '#1e293b',
                        textOutline: '1px contrast'
                    }
                }
            });

            showLoading(false);
            currentProvince = null;
            updateBreadcrumb();
        }

        async function drillDown(provinceName, chart) {
            showLoading(true);
            showProvinceInfo(provinceName);

            const filename = getFilename(provinceName);

            try {
                const response = await fetch(`https://raw.githubusercontent.com/xdev-asia-labs/vietnam-map-34-provinces/main/src/core/assets/provinces/${filename}`);
                const data = await response.json();

                const communeData = data.features.map(f => ({
                    "hc-key": f.properties.GID_3,
                    value: Math.floor(Math.random() * 100) + 10,
                    name: f.properties.NAME_3,
                    type: f.properties.TYPE_3,
                    district: f.properties.NAME_2
                }));

                currentProvince = provinceName;
                updateBreadcrumb();

                chart.addSeriesAsDrilldown(chart.series[0].points.find(p => p.name === provinceName), {
                    type: 'map',
                    name: provinceName,
                    data: communeData,
                    mapData: data,
                    joinBy: ['GID_3', 'hc-key'],
                    borderColor: '#ffffff',
                    borderWidth: 0.3,
                    states: {
                        hover: {
                            color: '#fbbf24',
                            borderColor: '#d97706'
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}',
                        style: {
                            fontSize: '7px',
                            fontWeight: '400',
                            textOutline: '1px contrast',
                            color: '#1e293b'
                        }
                    },
                    tooltip: {
                        pointFormat: '<div><b>{point.name}</b></div><div style="color:#94a3b8">{point.type} - {point.district}</div>'
                    }
                });

                document.getElementById('mapTitle').textContent = `üó∫Ô∏è ${provinceName}`;
                document.getElementById('drilldownHint').style.display = 'none';

            } catch (error) {
                console.error('Failed to load province data:', error);
                alert('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ªânh. Vui l√≤ng th·ª≠ l·∫°i.');
            }

            showLoading(false);
        }

        window.goToCountry = function () {
            if (mainChart) {
                while (mainChart.drilldownLevels && mainChart.drilldownLevels.length > 0) {
                    mainChart.drillUp();
                }
            }
            currentProvince = null;
            updateBreadcrumb();
            document.getElementById('mapTitle').textContent = 'üó∫Ô∏è B·∫£n ƒë·ªì 34 t·ªânh';
            document.getElementById('provinceInfo').classList.remove('active');
            document.getElementById('drilldownHint').style.display = 'block';
        }

        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            if (currentProvince) {
                breadcrumb.innerHTML = `
                    <span onclick="goToCountry()">Vi·ªát Nam</span>
                    <span>‚Üí</span>
                    <span class="current">${currentProvince}</span>
                `;
            } else {
                breadcrumb.innerHTML = `<span class="current">Vi·ªát Nam</span>`;
            }
        }

        function showProvinceInfo(name) {
            const info = document.getElementById('provinceInfo');
            info.classList.add('active');

            document.getElementById('provinceName').textContent = name;
            document.getElementById('provinceType').textContent =
                ['H√† N·ªôi', 'H·ªì Ch√≠ Minh', 'ƒê√† N·∫µng', 'C·∫ßn Th∆°', 'H·∫£i Ph√≤ng', 'Hu·∫ø'].includes(name) ? 'Th√†nh ph·ªë' : 'T·ªânh';
            document.getElementById('provinceCommunes').textContent =
                (PROVINCE_COMMUNES[name] || 0).toLocaleString();

            // Find merged from
            const mergedFrom = [];
            for (const [old, newP] of Object.entries(PROVINCE_MAPPING)) {
                if (newP === name && !mergedFrom.includes(old)) {
                    mergedFrom.push(old);
                }
            }
            document.getElementById('provinceMerged').textContent =
                mergedFrom.length > 1 ? mergedFrom.length + ' t·ªânh' : 'Kh√¥ng h·ª£p nh·∫•t';
        }

        function showLoading(show) {
            document.getElementById('loading').classList.toggle('active', show);
        }

        initMap();
    </script>
</body>

</html>