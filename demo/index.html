<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnam Map 34 Provinces - Demo</title>
    <meta name="description" content="B·∫£n ƒë·ªì Vi·ªát Nam v·ªõi 34 t·ªânh/th√†nh ph·ªë m·ªõi theo Ngh·ªã quy·∫øt 60-NQ/TW">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Highcharts -->
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/drilldown.js"></script>
    
    <style>
        :root {
            --primary: #0ea5e9;
            --primary-dark: #0284c7;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0f172a 100%);
            --card-bg: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: #fff;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 3rem 0;
        }
        
        .badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #fff, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 1.125rem;
            margin-bottom: 2rem;
        }
        
        /* Map Container */
        .map-section {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        @media (max-width: 1024px) {
            .map-section {
                grid-template-columns: 1fr;
            }
        }
        
        .map-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }
        
        #map {
            height: 600px;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }
        
        .card h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #e2e8f0;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(14, 165, 233, 0.1);
            border-radius: 0.75rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Selected Province Info */
        .province-info {
            display: none;
        }
        
        .province-info.active {
            display: block;
        }
        
        .province-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .province-detail {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
        }
        
        .province-detail:last-child {
            border-bottom: none;
        }
        
        .province-detail span:first-child {
            color: #94a3b8;
        }
        
        .province-detail span:last-child {
            font-weight: 600;
        }
        
        /* Merged From List */
        .merged-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .merged-tag {
            background: rgba(14, 165, 233, 0.2);
            color: var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* Province List */
        .province-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .province-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .province-list-item:hover {
            background: rgba(14, 165, 233, 0.1);
        }
        
        .province-list-item .name {
            font-size: 0.875rem;
        }
        
        .province-list-item .value {
            font-size: 0.75rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: #64748b;
            font-size: 0.875rem;
        }
        
        footer a {
            color: var(--primary);
            text-decoration: none;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            font-size: 0.875rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-outline {
            border: 1px solid var(--border);
            color: #e2e8f0;
        }
        
        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }
        
        /* Code Block */
        .code-block {
            background: #0f172a;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
            color: #e2e8f0;
        }
        
        .code-block .comment {
            color: #64748b;
        }
        
        .code-block .string {
            color: #22c55e;
        }
        
        .code-block .keyword {
            color: #f472b6;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Ngh·ªã quy·∫øt 60-NQ/TW</span>
            <h1>üáªüá≥ Vietnam Map 34 Provinces</h1>
            <p class="subtitle">B·∫£n ƒë·ªì Vi·ªát Nam v·ªõi 34 t·ªânh/th√†nh ph·ªë m·ªõi (hi·ªáu l·ª±c 01/07/2025)</p>
            
            <div class="btn-group">
                <a href="https://github.com/xdev-asia-labs/vietnam-map-34-provinces" class="btn btn-outline" target="_blank">
                    ‚≠ê GitHub
                </a>
                <a href="https://www.npmjs.com/package/@xdev-asia-labs/vietnam-map-34-provinces" class="btn btn-primary" target="_blank">
                    üì¶ npm install
                </a>
            </div>
        </header>
        
        <div class="map-section">
            <div class="map-container">
                <div id="map"></div>
            </div>
            
            <div class="sidebar">
                <div class="card">
                    <h3>üìä Th·ªëng k√™</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-value">34</div>
                            <div class="stat-label">T·ªânh m·ªõi</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">23</div>
                            <div class="stat-label">ƒê√£ h·ª£p nh·∫•t</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">11</div>
                            <div class="stat-label">Gi·ªØ nguy√™n</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">63</div>
                            <div class="stat-label">T·ªânh c≈©</div>
                        </div>
                    </div>
                </div>
                
                <div class="card province-info" id="provinceInfo">
                    <h3>üìç T·ªânh ƒë√£ ch·ªçn</h3>
                    <div class="province-name" id="provinceName">-</div>
                    <div class="province-detail">
                        <span>M√£ v√πng</span>
                        <span id="provinceCode">-</span>
                    </div>
                    <div class="province-detail">
                        <span>Gi√° tr·ªã</span>
                        <span id="provinceValue">-</span>
                    </div>
                    <div class="province-detail">
                        <span>H·ª£p nh·∫•t t·ª´</span>
                        <span id="provinceMerged">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üì¶ C√†i ƒë·∫∑t</h3>
                    <div class="code-block">
                        <span class="comment">// Vanilla JS</span><br>
                        <span class="keyword">import</span> { createVietnamMap }<br>
                        &nbsp;&nbsp;<span class="keyword">from</span> <span class="string">'@xdev-asia-labs/vietnam-map-34-provinces/vanilla'</span>;<br><br>
                        <span class="keyword">const</span> map = createVietnamMap(<span class="string">'#container'</span>);
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            Made with ‚ù§Ô∏è by <a href="https://github.com/xdev-asia-labs">xdev-asia-labs</a>
            &nbsp;‚Ä¢&nbsp;
            <a href="https://github.com/xdev-asia-labs/vietnam-map-34-provinces">View on GitHub</a>
        </footer>
    </div>
    
    <script type="module">
        // Province mapping data (embedded for demo)
        const PROVINCE_MAPPING = {
            "ha noi": "H√† N·ªôi", "ha tay": "H√† N·ªôi",
            "thua thien hue": "Hu·∫ø", "thua thien - hue": "Hu·∫ø", "hue": "Hu·∫ø",
            "lai chau": "Lai Ch√¢u", "dien bien": "ƒêi·ªán Bi√™n", "son la": "S∆°n La",
            "lang son": "L·∫°ng S∆°n", "quang ninh": "Qu·∫£ng Ninh", "thanh hoa": "Thanh H√≥a",
            "nghe an": "Ngh·ªá An", "ha tinh": "H√† Tƒ©nh", "cao bang": "Cao B·∫±ng",
            "tuyen quang": "Tuy√™n Quang", "ha giang": "Tuy√™n Quang",
            "lao cai": "L√†o Cai", "yen bai": "L√†o Cai",
            "bac kan": "Th√°i Nguy√™n", "bac can": "Th√°i Nguy√™n", "thai nguyen": "Th√°i Nguy√™n",
            "vinh phuc": "Ph√∫ Th·ªç", "phu tho": "Ph√∫ Th·ªç", "hoa binh": "Ph√∫ Th·ªç",
            "bac ninh": "B·∫Øc Ninh", "bac giang": "B·∫Øc Ninh",
            "hung yen": "H∆∞ng Y√™n", "thai binh": "H∆∞ng Y√™n",
            "hai duong": "H·∫£i Ph√≤ng", "hai phong": "H·∫£i Ph√≤ng",
            "ha nam": "Ninh B√¨nh", "ninh binh": "Ninh B√¨nh", "nam dinh": "Ninh B√¨nh",
            "quang binh": "Qu·∫£ng Tr·ªã", "quang tri": "Qu·∫£ng Tr·ªã",
            "quang nam": "ƒê√† N·∫µng", "da nang": "ƒê√† N·∫µng",
            "kon tum": "Qu·∫£ng Ng√£i", "quang ngai": "Qu·∫£ng Ng√£i",
            "gia lai": "Gia Lai", "binh dinh": "Gia Lai",
            "ninh thuan": "Kh√°nh H√≤a", "khanh hoa": "Kh√°nh H√≤a",
            "lam dong": "L√¢m ƒê·ªìng", "dak nong": "L√¢m ƒê·ªìng", "binh thuan": "L√¢m ƒê·ªìng",
            "dak lak": "ƒê·∫Øk L·∫Øk", "phu yen": "ƒê·∫Øk L·∫Øk",
            "ba ria - vung tau": "H·ªì Ch√≠ Minh", "ba ria vung tau": "H·ªì Ch√≠ Minh",
            "binh duong": "H·ªì Ch√≠ Minh", "ho chi minh": "H·ªì Ch√≠ Minh",
            "dong nai": "ƒê·ªìng Nai", "binh phuoc": "ƒê·ªìng Nai",
            "tay ninh": "T√¢y Ninh", "long an": "T√¢y Ninh",
            "can tho": "C·∫ßn Th∆°", "soc trang": "C·∫ßn Th∆°", "hau giang": "C·∫ßn Th∆°",
            "ben tre": "Vƒ©nh Long", "vinh long": "Vƒ©nh Long", "tra vinh": "Vƒ©nh Long",
            "tien giang": "ƒê·ªìng Th√°p", "dong thap": "ƒê·ªìng Th√°p",
            "bac lieu": "C√† Mau", "ca mau": "C√† Mau",
            "an giang": "An Giang", "kien giang": "An Giang"
        };

        function normalizeName(str) {
            if (!str) return "";
            return str.toLowerCase()
                .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                .replace(/ƒë/g, "d").replace(/ƒê/g, "D")
                .trim();
        }

        // Load and process map
        async function initMap() {
            const response = await fetch('https://raw.githubusercontent.com/xdev-asia-labs/vietnam-map-34-provinces/main/src/core/assets/vn-all.geo.json');
            const topology = await response.json();
            
            // Group features by new province
            const groupedFeatures = {};
            topology.features.forEach(f => {
                const originalName = f.properties.name;
                const normalized = normalizeName(originalName);
                let newName = PROVINCE_MAPPING[normalized];
                
                if (!newName) {
                    const foundKey = Object.keys(PROVINCE_MAPPING).find(key => normalized.includes(key));
                    newName = foundKey ? PROVINCE_MAPPING[foundKey] : originalName;
                }
                
                const newId = `vn-new-${normalizeName(newName).replace(/\s+/g, '-')}`;
                
                if (!groupedFeatures[newId]) {
                    groupedFeatures[newId] = [];
                }
                groupedFeatures[newId].push({ feature: f, newName, newId, originalName });
            });
            
            // Create merged features
            const mergedFeatures = Object.values(groupedFeatures).map(group => {
                const firstItem = group[0];
                
                if (group.length === 1) {
                    return {
                        ...firstItem.feature,
                        properties: {
                            ...firstItem.feature.properties,
                            "hc-key": firstItem.newId,
                            name: firstItem.newName,
                            "original-names": [firstItem.originalName]
                        }
                    };
                }
                
                const mergedCoordinates = [];
                group.forEach(item => {
                    const geom = item.feature.geometry;
                    if (geom.type === 'Polygon') {
                        mergedCoordinates.push(geom.coordinates);
                    } else if (geom.type === 'MultiPolygon') {
                        mergedCoordinates.push(...geom.coordinates);
                    }
                });
                
                return {
                    type: "Feature",
                    properties: {
                        "hc-key": firstItem.newId,
                        name: firstItem.newName,
                        "original-names": group.map(g => g.originalName)
                    },
                    geometry: {
                        type: "MultiPolygon",
                        coordinates: mergedCoordinates
                    }
                };
            });
            
            const processedTopology = { ...topology, features: mergedFeatures };
            
            // Generate demo data
            const mapData = mergedFeatures.map(f => ({
                "hc-key": f.properties["hc-key"],
                value: Math.floor(Math.random() * 10000) + 1000,
                name: f.properties.name,
                originalNames: f.properties["original-names"]
            }));
            
            // Create chart
            Highcharts.mapChart('map', {
                chart: {
                    map: processedTopology,
                    backgroundColor: 'transparent',
                    height: 600
                },
                title: { text: null },
                credits: { enabled: false },
                mapNavigation: {
                    enabled: true,
                    enableDoubleClickZoom: true,
                    buttonOptions: { verticalAlign: 'bottom' }
                },
                colorAxis: {
                    min: 0,
                    stops: [
                        [0, '#E1F5FE'],
                        [0.4, '#4FC3F7'],
                        [1, '#01579B']
                    ]
                },
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.95)',
                    borderColor: '#334155',
                    style: { color: '#fff' },
                    useHTML: true,
                    headerFormat: '<div style="font-size:14px;font-weight:bold;margin-bottom:8px">{point.key}</div>',
                    pointFormat: '<div>Gi√° tr·ªã: <b>{point.value:,.0f}</b></div>'
                },
                series: [{
                    type: 'map',
                    data: mapData,
                    joinBy: 'hc-key',
                    borderColor: '#ffffff',
                    borderWidth: 0.5,
                    states: {
                        hover: {
                            color: '#fbbf24',
                            borderColor: '#d97706'
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}',
                        style: {
                            fontSize: '9px',
                            fontWeight: '500',
                            textOutline: '2px contrast',
                            color: '#1e293b'
                        }
                    },
                    point: {
                        events: {
                            click: function() {
                                showProvinceInfo(this);
                            }
                        }
                    }
                }]
            });
        }
        
        function showProvinceInfo(point) {
            const info = document.getElementById('provinceInfo');
            info.classList.add('active');
            
            document.getElementById('provinceName').textContent = point.name;
            document.getElementById('provinceCode').textContent = point['hc-key'];
            document.getElementById('provinceValue').textContent = point.value?.toLocaleString() || '-';
            
            const originals = point.originalNames || [];
            document.getElementById('provinceMerged').textContent = 
                originals.length > 1 ? originals.join(', ') : 'Kh√¥ng h·ª£p nh·∫•t';
        }
        
        initMap();
    </script>
</body>
</html>
